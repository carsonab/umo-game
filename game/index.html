<!DOCTYPE html>
<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.51.0/dist/phaser-arcade-physics.min.js"></script>
</head>

<body>

    <script>
        var config = {
            width: 800,
            height: 600,
            type: Phaser.AUTO,
            parent: 'phaser-example',
            scene: {
                preload: preload,
                create: create,
                update: update
            }
        };

        var gameTime;
        var busEndPositionX;

        var game = new Phaser.Game(config);

        function preload() {
            this.load.image('bus', 'assets/bus.png');
        }

        function create() {
            this.input.mouse.disableContextMenu();

            // Add bus
            var busImage = this.add.image(100, 300, 'bus');
            busImage.scaleX = 0.30;
            busImage.scaleY = 0.30;

            // Tween the move the bus
            var tween = this.tweens.add({
                targets: busImage,
                props: {
                    x: { value: function () { return busEndPositionX; }, ease: 'Power1' }
                },
                duration: 1000,
                paused: true,
                onStart: onBusMoving,
                onStartParams: [busImage]
            });

            // Do stuff when mouse button is released
            this.input.on('pointerup', function (pointer) {
                if (pointer.leftButtonReleased()) {
                    // Get time button was down
                    var mouseDownDuration = gameTime - pointer.downTime;

                    // Move the bus
                    // Will move 300 for every 1 second held down (starting position is 100)
                    // mouseDownDuration is in ms
                    busEndPositionX = 100 + mouseDownDuration / 1000 * 300;
                    tween.play();
                }
            });
        }

        function update(time, delta) {
            var pointer = this.input.activePointer;

            gameTime = time;
        }

        function onBusMoving(tween, targets, gameObject) {
            // Do nothing
        }

    </script>
</body>

</html>